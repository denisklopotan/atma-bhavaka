{% extends "base.html" %}
{% load static %}
{% block title %}Book{% endblock %}

{% block extracss %}
<style>
    main {
        background-color: #bd9640; /* contact page background color */
        /* background-color: #cf824a; */
        padding: 40px 20px 40px;
    }

    .class-card {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        padding-bottom: 20px;
        margin-bottom: 20px;
        border-bottom: 1px solid #bd9149;
    }

    .class-card:last-child {
        border-bottom: none;
        margin-bottom: 0;
    }

    .class-card-content {
        flex: 1;
    }

    .class-card h3 {
        font-size: 1.1em;
        font-weight: bold;
    }

    .qr-code {
        width: 110px;
        height: auto;
        flex-shrink: 0;
        padding: 32.5px;
    }

    @media (max-width: 768px) {
    main {
        padding: 20px; /* Reduced padding for smaller screens */
    }
    
    .class-card {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .qr-code {
        width: 110px;
        padding: 0;
        margin-left: 40px;
    }
    
    .stemexpressie-booking {
        flex-direction: column !important;
        align-items: flex-start;
    }
    
    .stemexpressie-booking .qr-code {
        margin-left: 40px;
    }
    }
</style>
{% endblock %}

{% block content %}
<!-- <h1>Contact & Bookings</h1> -->
<!-- Contact Links -->
<div class="container">
  <div class="book-page">
    <h2 style="margin-top: 0px;">Program & Booking</h2>
    
    {% if atma_intro %}
    <div style="margin-bottom: 30px;">
      <h3>{{ atma_intro.title }}</h3>
      {{ atma_intro.content|safe }}
    </div>
    {% endif %}

    <div class="classes-section">
      {% for package in packages %}
        {% if package.order <= 5 %}
        <div class="class-card">
          <div class="class-card-content">
            <h3>{{ package.name }}</h3>
            {{ package.description|safe }}
            {{ package.details|safe }}
          </div>
          {% if package.payment_url %}
          <a href="{{ package.payment_url }}" target="_blank" rel="noopener">
            <img src="{% static 'media/' %}{{ package.qr_code_image }}" alt="QR Code for {{ package.name }}" class="qr-code">
          </a>
          {% endif %}
        </div>
        {% endif %}
      {% endfor %}
    </div>

    <hr style="border: 1px solid #8b6f47; margin: 10px 0 30px;">

    {% if stemexpressie_intro %}
    <div style="margin-bottom: 30px;">
      <h3>{{ stemexpressie_intro.title }}</h3>
      {{ stemexpressie_intro.content|safe }}
      
      {% for package in packages %}
        {% if package.order == 6 %}
        <h4><strong>Booking</strong></h4>
        <div class="stemexpressie-booking" style="display: flex; align-items: flex-start; gap: 20px;">
          <div style="flex: 1; margin: 0;">
            {{ package.description|safe }}
            {{ package.details|safe }}
          </div>
          {% if package.payment_url %}
          <a href="{{ package.payment_url }}" target="_blank" rel="noopener">
            <img src="{% static 'media/' %}{{ package.qr_code_image }}" alt="QR Code for {{ package.name }}" class="qr-code">
          </a>
          {% endif %}
        </div>
        {% endif %}
      {% endfor %}
    </div>
    {% endif %}

    <hr style="border: 1px solid #8b6f47; margin: 20px 0;">

    <h2 style="margin-top: 20px;">Info</h2>
    {% if contact_info %}
    <div>
      <h3><strong>Contact</strong></h3>
      <ul>
        <li>
          <a class="contact-link" href="tel:{{ contact_info.phone }}" target="_blank" rel="noopener">
            <b>Mobile:</b> {{ contact_info.phone }}
          </a>
        </li>
        <li>
          <a class="contact-link" href="mailto:{{ contact_info.email }}" rel="noopener">
            <b>Email:</b> {{ contact_info.email }}
          </a>
        </li>
        <li>
          <a class="contact-link" href="{{ contact_info.instagram_url }}" target="_blank" rel="noopener">
            <b>Instagram:</b> {{ contact_info.instagram_handle }}
          </a>
        </li>
      </ul>
    </div>

    <div>
      <h3><strong>Workshop address:</strong></h3>
      <ul>
        <li>{{ contact_info.workshop_address_line1 }}</li>
        <li>{{ contact_info.workshop_address_line2 }}</li>
      </ul>
    </div>

    <div>
      <h3><strong>Company info:</strong></h3>
      <ul>
        <li>{{ contact_info.company_name }}</li>
        <li>{{ contact_info.company_address_line1 }}</li>
        <li>{{ contact_info.company_address_line2 }}</li>
        <li>KVK Number: {{ contact_info.company_kvk }}</li>
      </ul>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
